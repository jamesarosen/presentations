<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=1024, user-scalable=no">

    <title>JavaScript Tools for Developer Happiness</title>

    <link rel="stylesheet" href="../deck/core/deck.core.css">
    <link rel="stylesheet" href="../deck/extensions/status/deck.status.css">
    <link rel="stylesheet" href="../deck/extensions/hash/deck.hash.css">
    <link rel="stylesheet" href="../deck/extensions/scale/deck.scale.css">
    <link rel="stylesheet" href="../deck/themes/transition/vertical-slide.css">
    <link rel="stylesheet" href="../deck/themes/style/zendesk.css">

    <script src="../deck/assets/modernizr.custom.js"></script>
  </head>
  <body class="deck-container">
    <!-- slides -->

    <section class="slide chapter green">
      <h1>
        JavaScript Tools<br />For Developer Happiness
        <cite>https://github.com/jamesarosen/presentations/javascript_equipment</cite>
      </h1>
    </section>

    <section class="slide chapter green">
      <h1>
        <img src="../deck/themes/style/buddhy.png" />
      </h1>
    </section>

    <section class="slide chapter green">
      <h1>Chapter 0: <code>whoami</code></h1>
    </section>

    <section class='slide'>
      <p>James A. Rosen</p>
      <p>Senior User Happiness Engineer, Zendesk</p>
      <p>@jamearosen</p>
      <p>https://github.com/jamesarosen</p>
    </section>

    <section class='slide chapter green'>
      <h1>Chapter 1: Tools Philosophy</h1>
    </section>

    <section class='slide'>
      <header>Working</header>
      <figure>
        <img src="./assets/broken_wrench.jpg" />
        <figcaption><cite>
          <a href='http://www.flickr.com/photos/9115274@N05/577382652/'>
            http://www.flickr.com/photos/9115274@N05/577382652/
          </a>
        </cite></figcaption>
      </figure>
    </section>

    <section class='slide'>
      <header>Fast</header>
      <figure>
        <img src="./assets/cheetah.jpg" />
        <figcaption><cite>
          <a href='http://www.flickr.com/photos/geyring/5290188093/'>
            http://www.flickr.com/photos/geyring/5290188093/
          </a>
        </cite></figcaption>
      </figure>
    </section>

    <section class='slide'>
      <header>Slow is OK</header>
      <figure>
        <img src="./assets/turkish_tea.jpg" />
        <figcaption><cite>
          <a href='http://www.flickr.com/photos/mbgrigby/5161070259/'>
            http://www.flickr.com/photos/mbgrigby/5161070259/
          </a>
        </cite></figcaption>
      </figure>
    </section>

    <section class='slide'>
      <header>Polyglot</header>
      <figure>
        <img src="./assets/polyglot.jpg" />
        <figcaption><cite>
          <a href='http://www.flickr.com/photos/quinnanya/5383598076/'>
            http://www.flickr.com/photos/quinnanya/5383598076/
          </a>
        </cite></figcaption>
      </figure>
    </section>

    <section class="slide chapter green">
      <h1>Chapter 2: <code>cat.js</code></h1>
    </section>

    <section class="slide">
      <header>User Story: Catness</header>
      <p>As a cat,</p>
      <p>I want to be directly under your hand, wherever it happens to be, regardless of what you are doing, all the time</p>
      <p>So that I epitomize catness.</p>
      <p><cite>
        <a href="https://twitter.com/catuserstories/status/311275434669142019" class='odd-eyed-cat'>
          https://twitter.com/catuserstories/status/311275434669142019
        </a>
      </cite></p>
    </section>

    <section class='slide'>
      <figure>
        <img src="./assets/odd_eyed_cat.jpg" />
        <figcaption><cite>
          <a href='http://www.flickr.com/photos/ihasb33r/2573196546/'>
            http://www.flickr.com/photos/ihasb33r/2573196546/
          </a>
        </cite></figcaption>
      </figure>
    </section>

    <section class="slide chapter green">
      <h1>
        Chapter 3: JSHint<br />
        <span class='subtitle'>The <i>Sine Qua Non</i> of JavaScript Development</span>
      </h1>
    </section>

    <section class="slide">
      <header><i>Sine Qua Non</i></header>
      <pre>/ˌsaɪnɨ kweɪ ˈnɒn/ or /ˈsine kwaː ˈnoːn/

If you don't use this, I will smack you with a fish.

Origin: L, without which not</pre>
    </section>

    <section class="slide">
      <header>JSHint Installation</header>
      <ol>
        <li class='slide'>Go to <a href="http://nodejs.org/">http://nodejs.org/</a></li>
        <li class='slide'>Install NodeJS</a></li>
        <li class='slide'><code>npm install -g jshint</code><br />(more on this later)</li>
      </ol>
    </section>

    <section class="slide">
      <header>JSHint Usage</header>
      <pre class='slide'>jshint assets/insistent_cat.js
assets/insistent_cat.js: line 21, col 53, Expected an assignment or function call and instead saw an expression.
</pre>
    </section>

    <section class='slide'>
      <header>Before &amp; After</header>
      <pre class='slide'>cat.following ? cat.unfollow() : cat.follow();</pre>
      <pre class='slide'>if (cat.following) {
  cat.unfollow();
} else {
 cat.follow();
}</pre>
    </section>

    <section class='slide'>
      <header>JSHint: Multiple Versions</header>
      <p>
        You work on many projects; each prefers a specific version of JSHint
      </pre>
    </section>

    <section class='slide'>
      <header>Install Locally</header>
      <pre class='slide'>{
  "devDependencies": {
    "jshint": "~1.1.0"
  }
}</pre>
      <pre class='slide'>npm install</pre>
      <p class='slide'>Ignore warnings about <code>-g</code></p>
    </section>

    <section class='slide'>
      <header>Run Locally</header>
      <pre>node_modules/jshint/bin/hint myFile.js</pre>
    </section>

    <section class='slide'>
      <header>JSHint: Bonus Points</header>
      <ul>
        <li class='slide'>Run from editor w/ keyboard shortcut</li>
        <li class='slide'>Run from editor on save</li>
        <li class='slide'>Add to git pre-commit hook</li>
        <li class='slide'>Run in <abbr title="Continuous Integration">CI</abbr></li>
      </ul>
    </section>

    <section class="slide chapter green">
      <h1>Chapter 4: Working with Multiple Files</h1>
    </section>

    <section class='slide'>
      <header>JSHint: Multiple Files</header>
      <pre>find . -name *.js | xargs node_modules/jshint/bin/hint</pre>
    </section>

    <section class='slide'>
      <header>Refactor</header>
      <p>In <code>script/hint</code>:</p>
      <pre>#!/bin/sh
find . -name *.js | xargs node_modules/jshint/bin/hint</pre>
    </section>

    <section class='slide'>
      <header><code>cat</code></header>
      <pre>cat src/cat_image.js \
  src/cat_follower.js \
  > assets/insistent_cat.js</pre>
    </section>

    <section class='slide'>
      <header>Problem!</header>
      <pre>(function(window, $, undefined) {

  // contents go gere

  window.InsistentCat = InsistentCat;

}(this, this.jQuery));</pre>
    </section>

    <section class='slide'>
      <header>"Solution"</header>
      <p>In <code>script/build</code>:</p>
      <pre>#!/bin/sh
cat src/header.js
  src/cat_image.js
  src/cat_follower.js
  src/footer.js
  > assets/insistent_cat.js</pre>
    </section>

    <section class="slide chapter green">
      <h1>Chapter 5: Modularization</h1>
    </section>

    <section class='slide'>
      <header>Options</header>
      <ul>
        <li class='slide'>require.js - different name for globals</li>
        <li class='slide'>
          ES6 Modules (<code>es6-module-transpiler</code>) - promising, but
          in flux.
        </li>
        <li class='slide'>CommonJS - the best we've got.</li>
      </ul>
    </section>

    <section class='slide'>
      <header>Export</header>
      <pre>// in cat_image.js:
module.exports = function buildCatImage(src, options) {
  // ...
};</pre>
    </section>

    <section class='slide'>
      <header>Import</header>
      <pre>// in cat_follower.js:
var buildImage = require('./cat_image');
// ...
var catImage = buildImage('path/to/cat.png', { width: '20px' });
</pre>
    </section>

    <section class='slide'>
      <header>CommonJS -> Browser Compilers</header>
      <ul>
        <li class='slide'><a href="https://github.com/azer/onejs">OneJS</a></li>
        <li class='slide'><a href="https://github.com/mixu/gluejs">GlueJS</a></li>
        <li class='slide'><a href="https://github.com/substack/node-browserify">Browserify</a></li>
        <li class='slide'>Custom Shell Script</li>
      </ul>
    </section>

    <section class='slide'>
      <header>CommonJS Compiler Concerns</header>
      <p class='slide'>Define <code>require</code></p>
      <p class='slide'>Convert files to module definitions</p>
      <p class='slide'>Optional: convert (vendor) globals to modules</p>
      <p class='slide'>Optional: export a single global</p>
    </section>

    <section class='slide'>
      <header>Browserification: Framework</header>
      <p>From <a href="https://github.com/maccman/sprockets-commonjs/blob/master/lib/assets/javascripts/sprockets/commonjs.js">Sprockets-CommonJS</a>:</p>
      <pre>var require = function(name, root) {
  ...
};
require.define = function(bundle) {
  ...
};</pre>
    </section>

    <section class='slide'>
      <header>Browserification: Compiler</header>
      <p>In <code>script/cjs2browser</code>:</p>
      <pre>#!/bin/sh

filename="$1";

echo "require.define(\"${filename}\","
echo "  function(exports, require, module) {";
cat  $filename;
echo "});";</pre>
    </section>

    <section class='slide'>
      <header>Browserification: Build Script</header>
      <pre>outfile="assets/insistent_cat.js"
find src -name *.js | xargs node_modules/jshint/bin/hint || exit 1;
cat  script/commonjs_shim.js > $outfile;
echo "$(script/cjs2browser src/cat_image.js)" >> $outfile;
echo "$(script/cjs2browser src/cat_follower.js)" >> $outfile;
</pre>
    </section>

    <section class='slide'>
      <header>Refactor</header>
      <pre>outfile="assets/insistent_cat.js"
js_files=$(find src -name *.js)
echo "$js_files" | xargs jshint || exit 1;
cat  script/commonjs_shim.js > $outfile;
for js_file in $js_files; do
  echo "$(script/cjs2browser $js_file)" >> $outfile;
done
</pre>
    </section>

    <section class='slide'>
      <header>Problem!</header>
      <pre>var catImage = require('src/cat_image.js')</pre>
    </section>

    <section class='slide'>
      <header>"Solution"</header>
      <pre>sed -E 's/^src\/(.+)\.js$/\1/p'</pre>
    </section>

    <!-- deck.status snippet -->
    <p class="deck-status">
      <span class="deck-status-current"></span>
      /
      <span class="deck-status-total"></span>
    </p>

    <!-- Required JS files. -->
    <script src="../deck/assets/jquery-1.7.2.min.js"></script>
    <script src="./assets/insistent_cat.js"></script>
    <script src="../deck/core/deck.core.js"></script>

    <!-- Extension JS files. Add or remove as needed. -->
    <script src="../deck/extensions/hash/deck.hash.js"></script>
    <script src="../deck/extensions/status/deck.status.js"></script>
    <script src="../deck/extensions/scale/deck.scale.js"></script>

    <!-- Initialize the deck. You can put this in an external file if desired. -->
    <script>
      $(function() {
        $(document).bind('deck.beforeInit', function() {
          $('.deck-container > .slide')
            .not('.chapter.green')
            .not('.buddhy')
              .each(function() {
                if ( $(this).find('header').length === 0 ) {
                  $(this).prepend('<header />');
                }
              });
        });

        $.deck('.slide');
        new InsistentCat('./assets/odd_eyed_cat.jpg', '5em');
      });
    </script>
  </body>
</html>
